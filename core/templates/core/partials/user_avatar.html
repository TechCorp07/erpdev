<!-- core/templates/core/partials/user_avatar.html -->
{% if has_image %}
  <img src="{{ user.profile.profile_image.url }}" alt="{{ user.username }}" 
       width="{{ size }}" height="{{ size }}" class="rounded-circle">
{% else %}
  <div class="rounded-circle bg-secondary d-flex align-items-center justify-content-center" 
       style="width: {{ size }}px; height: {{ size }}px;">
    <span class="text-white" style="font-size: {% widthratio size 2 1 %}px;">
      {{ user.first_name|first|default:user.username|first|upper }}
    </span>
  </div>
{% endif %}