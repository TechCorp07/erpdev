{% extends "universal_base.html" %}
{% load static %}

{% block body_class %}website{% endblock %}

{% block navigation %}
<!-- PUBLIC WEBSITE NAVIGATION -->
<nav class="navbar navbar-expand-lg navbar-light bg-light sticky-top">
  <div class="container">
    <!-- Brand -->
    <a class="navbar-brand" href="{% url 'website:home' %}">
      <img src="{% static 'website/img/blitztech-logo.png' %}" alt="BlitzTech Electronics" height="40" class="me-2">
      BlitzTech Electronics
    </a>

    <!-- Toggler for small screens -->
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav" 
            aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <!-- Navbar items -->
    <div class="collapse navbar-collapse" id="navbarNav">
      <ul class="navbar-nav me-auto">
        <!-- Public navigation links -->
        <li class="nav-item">
          <a class="nav-link {% if request.resolver_match.url_name == 'home' %}active{% endif %}" href="{% url 'website:home' %}">Home</a>
        </li>
        <li class="nav-item">
          <a class="nav-link {% if request.resolver_match.url_name == 'about' %}active{% endif %}" href="{% url 'website:about' %}">About</a>
        </li>
        <li class="nav-item">
          <a class="nav-link {% if request.resolver_match.url_name == 'services' %}active{% endif %}" href="{% url 'website:services' %}">Services</a>
        </li>
        <li class="nav-item">
          <a class="nav-link {% if request.resolver_match.url_name == 'portfolio' %}active{% endif %}" href="{% url 'website:portfolio' %}">Portfolio</a>
        </li>
        <li class="nav-item">
          <a class="nav-link {% if request.resolver_match.url_name == 'blog' %}active{% endif %}" href="{% url 'website:blog' %}">Blog</a>
        </li>
        <li class="nav-item">
          <a class="nav-link {% if request.resolver_match.url_name == 'contact' %}active{% endif %}" href="{% url 'website:contact' %}">Contact</a>
        </li>
        <li class="nav-item">
          <a class="nav-link {% if request.resolver_match.url_name == 'faq' %}active{% endif %}" href="{% url 'website:faq' %}">FAQ</a>
        </li>
      </ul>
      
      <!-- Authentication section -->
      <ul class="navbar-nav ms-auto">
        {% if user.is_authenticated %}
          <!-- If user is logged in, show quick access to dashboard -->
          <li class="nav-item dropdown">
            <a class="nav-link dropdown-toggle d-flex align-items-center" href="#" id="userDropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
              {% if user.profile.profile_image %}
                <img src="{{ user.profile.profile_image.url }}" alt="{{ user.username }}" class="rounded-circle user-avatar me-2">
              {% else %}
                <div class="rounded-circle bg-secondary user-avatar me-2 d-flex align-items-center justify-content-center">
                  <span class="text-white small">{{ user.first_name|first|default:user.username|first }}</span>
                </div>
              {% endif %}
              <span>{{ user.first_name|default:user.username }}</span>
            </a>
            <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="userDropdown">
              <li>
                <h6 class="dropdown-header">
                  {{ user.get_full_name|default:user.username }}
                  {% if user.profile %}
                    <small class="d-block text-muted">{{ user.profile.get_user_type_display }}</small>
                  {% endif %}
                </h6>
              </li>
              <li><hr class="dropdown-divider"></li>
              
              <!-- Dashboard Access -->
              {% if user.profile.user_type != 'customer' %}
              <li>
                <a class="dropdown-item" href="{% url 'core:dashboard' %}">
                  <i class="bi bi-speedometer2 me-2"></i> Go to Dashboard
                </a>
              </li>
              <li><hr class="dropdown-divider"></li>
              {% endif %}
              
              <!-- Profile Management -->
              <li>
                <a class="dropdown-item" href="{% url 'core:profile' %}">
                  <i class="bi bi-person me-2"></i> My Profile
                </a>
              </li>
              
              <!-- Logout -->
              <li>
                <a class="dropdown-item text-danger" href="{% url 'core:logout' %}">
                  <i class="bi bi-box-arrow-right me-2"></i> Logout
                </a>
              </li>
            </ul>
          </li>
        {% else %}
          <!-- Not authenticated - show login options -->
          <li class="nav-item dropdown">
            <a class="nav-link dropdown-toggle" href="#" id="loginDropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
              <i class="bi bi-person me-1"></i> Login
            </a>
            <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="loginDropdown">
              <li>
                <h6 class="dropdown-header">Choose Account Type</h6>
              </li>
              <li>
                <a class="dropdown-item" href="{% url 'core:login' %}?type=customer">
                  <i class="bi bi-person me-2"></i> Customer Login
                </a>
              </li>
              <li>
                <a class="dropdown-item" href="{% url 'core:login' %}?type=blogger">
                  <i class="bi bi-pen me-2"></i> Blogger Login
                </a>
              </li>
              <li>
                <a class="dropdown-item" href="{% url 'core:login' %}?type=employee">
                  <i class="bi bi-briefcase me-2"></i> Employee Login
                </a>
              </li>
              <li><hr class="dropdown-divider"></li>
              <li>
                <a class="dropdown-item" href="{% url 'core:register' %}">
                  <i class="bi bi-person-plus me-2"></i> Create Account
                </a>
              </li>
            </ul>
          </li>
          
          <!-- Shopping cart for guests/customers -->
          <li class="nav-item">
            <a class="nav-link" href="#" title="Shopping Cart">
              <i class="bi bi-cart"></i>
              <span class="badge bg-primary ms-1">0</span>
            </a>
          </li>
        {% endif %}
      </ul>
    </div>
  </div>
</nav>
{% endblock %}

{% block extra_css %}
{{ block.super }}
<!-- Website-specific styling -->
<style>
  /* Override body background for website pages */
  body.website {
    background-color: #ffffff;
  }
  
  /* Website navigation styling */
  .navbar-brand img {
    max-height: 40px;
  }
  
  /* Active navigation highlighting */
  .navbar-nav .nav-link.active {
    font-weight: 500;
    color: #0d6efd !important;
  }
  
  /* Smooth hover effects for navigation */
  .navbar-nav .nav-link:hover {
    color: #0d6efd !important;
    transform: translateY(-1px);
  }
  
  /* Website content styling */
  main {
    min-height: calc(100vh - 200px); /* Account for nav and footer */
  }
  
  /* Website-specific utilities */
  .hero-section {
    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
    color: white;
    padding: 4rem 0;
  }
  
  .feature-card {
    transition: transform 0.3s ease, box-shadow 0.3s ease;
    border: none;
    box-shadow: 0 2px 10px rgba(0,0,0,0.1);
  }
  
  .feature-card:hover {
    transform: translateY(-5px);
    box-shadow: 0 5px 20px rgba(0,0,0,0.15);
  }
</style>
{% endblock %}

{% block footer %}
<!-- PUBLIC WEBSITE FOOTER -->
<footer class="bg-light py-5 mt-5">
  <div class="container">
    <div class="row">
      <div class="col-lg-3 col-md-6 mb-4 mb-md-0">
        <h5 class="mb-4">BlitzTech Electronics</h5>
        <p class="text-muted">We are a global tech intermediary that facilitates seamless connections between the African business and consumer sectors and the international marketplace.</p>
        <div class="d-flex mt-3">
          <a href="#" class="me-3 text-dark" title="Facebook"><i class="bi bi-facebook"></i></a>
          <a href="#" class="me-3 text-dark" title="Twitter"><i class="bi bi-twitter"></i></a>
          <a href="#" class="me-3 text-dark" title="LinkedIn"><i class="bi bi-linkedin"></i></a>
          <a href="#" class="me-3 text-dark" title="Instagram"><i class="bi bi-instagram"></i></a>
        </div>
      </div>
      
      <div class="col-lg-3 col-md-6 mb-4 mb-md-0">
        <h5 class="mb-4">Quick Links</h5>
        <ul class="list-unstyled">
          <li class="mb-2"><a href="{% url 'website:home' %}" class="text-decoration-none text-muted">Home</a></li>
          <li class="mb-2"><a href="{% url 'website:about' %}" class="text-decoration-none text-muted">About</a></li>
          <li class="mb-2"><a href="{% url 'website:services' %}" class="text-decoration-none text-muted">Services</a></li>
          <li class="mb-2"><a href="{% url 'website:portfolio' %}" class="text-decoration-none text-muted">Portfolio</a></li>
          <li class="mb-2"><a href="{% url 'website:blog' %}" class="text-decoration-none text-muted">Blog</a></li>
          <li class="mb-2"><a href="{% url 'website:contact' %}" class="text-decoration-none text-muted">Contact</a></li>
        </ul>
      </div>
      
      <div class="col-lg-3 col-md-6 mb-4 mb-md-0">
        <h5 class="mb-4">Our Services</h5>
        <ul class="list-unstyled">
          <li class="mb-2"><a href="{% url 'website:services' %}" class="text-decoration-none text-muted">Electronic Components</a></li>
          <li class="mb-2"><a href="{% url 'website:services' %}" class="text-decoration-none text-muted">PCB Fabrication</a></li>
          <li class="mb-2"><a href="{% url 'website:services' %}" class="text-decoration-none text-muted">Software Development</a></li>
          <li class="mb-2"><a href="{% url 'website:services' %}" class="text-decoration-none text-muted">Security Systems</a></li>
          <li class="mb-2"><a href="{% url 'website:services' %}" class="text-decoration-none text-muted">Drone Technology</a></li>
          <li class="mb-2"><a href="{% url 'website:services' %}" class="text-decoration-none text-muted">Power Systems</a></li>
        </ul>
      </div>
      
      <div class="col-lg-3 col-md-6 mb-4 mb-md-0">
        <h5 class="mb-4">Contact Us</h5>
        <p class="text-muted mb-2">
          <i class="bi bi-geo-alt me-2"></i>904 Premium Close, Mount Pleasant, Business Park, Harare, Zimbabwe
        </p>
        <p class="text-muted mb-2">
          <i class="bi bi-telephone me-2"></i>+263 774 613 020
        </p>
        <p class="text-muted mb-2">
          <i class="bi bi-envelope me-2"></i>sales@blitztechelectronics.co.zw
        </p>
        <p class="text-muted">
          <i class="bi bi-globe me-2"></i>www.blitztechelectronics.co.zw
        </p>
      </div>
    </div>
    
    <hr>
    
    <div class="row">
      <div class="col-md-6 text-center text-md-start">
        <p class="text-muted mb-0">&copy; 2025 BlitzTech Electronics. All rights reserved.</p>
      </div>
      <div class="col-md-6 text-center text-md-end">
        <ul class="list-inline mb-0">
          <li class="list-inline-item"><a href="#" class="text-muted">Privacy Policy</a></li>
          <li class="list-inline-item">•</li>
          <li class="list-inline-item"><a href="#" class="text-muted">Terms of Use</a></li>
          <li class="list-inline-item">•</li>
          <li class="list-inline-item"><a href="#" class="text-muted">Cookie Policy</a></li>
        </ul>
      </div>
    </div>
  </div>
</footer>

<!-- Back to top button for website pages -->
<button id="backToTopBtn" class="btn btn-primary rounded-circle position-fixed bottom-0 end-0 m-4" style="display: none; z-index: 1000;" title="Back to top">
  <i class="bi bi-arrow-up"></i>
</button>
{% endblock %}

{% block extra_js %}
{{ block.super }}
<!-- Website-specific JavaScript -->
<script>
document.addEventListener('DOMContentLoaded', function() {
  // Back to top functionality
  const backToTopBtn = document.getElementById('backToTopBtn');
  
  // Show/hide back to top button based on scroll position
  window.addEventListener('scroll', function() {
    if (window.pageYOffset > 300) {
      backToTopBtn.style.display = 'block';
    } else {
      backToTopBtn.style.display = 'none';
    }
  });
  
  // Smooth scroll to top when button is clicked
  backToTopBtn.addEventListener('click', function() {
    window.scrollTo({
      top: 0,
      behavior: 'smooth'
    });
  });
  
  // Smooth scrolling for anchor links
  document.querySelectorAll('a[href^="#"]').forEach(anchor => {
    anchor.addEventListener('click', function (e) {
      e.preventDefault();
      const target = document.querySelector(this.getAttribute('href'));
      if (target) {
        target.scrollIntoView({
          behavior: 'smooth',
          block: 'start'
        });
      }
    });
  });
  
  // Shopping cart functionality (placeholder)
  const cartButtons = document.querySelectorAll('[data-add-to-cart]');
  cartButtons.forEach(button => {
    button.addEventListener('click', function() {
      const productId = this.getAttribute('data-product-id');
      // Add to cart logic here
      BlitzTechUtils.showNotification('Product added to cart!', 'success');
    });
  });
});
</script>
{% endblock %}
